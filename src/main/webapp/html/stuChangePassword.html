<html>
<head>
    <link rel="stylesheet" type="text/css" href="/elective/student/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/elective/student/css/stuChangePassword.css">
    <link rel="stylesheet" type="text/css" href="/elective/layui/css/layui.css">
    <title>修改密码</title>
</head>
<body>
<div class="bg">
    <img src="/elective/student/images/banner.jpg">
</div>
<input type="text" id="id" value="${StuId}" hidden>
<div class="bigbox">
    <div class="big1">
        <div class="biaoti">
            <p><h2>学生密码修改</h2></p>
        </div>
        <form class="layui-form" action="">
            <div class="layui-form-item">
                <label class="layui-form-label">请输入密码</label>
                <div class="layui-input-block">
                    <input type="password" name="title" lay-verify="title" autocomplete="off" placeholder="请输入密码" class="layui-input" id="password" style="width: 70%;">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">请再次输入</label>
                <div class="layui-input-block">
                    <input type="password" name="title" lay-verify="title" autocomplete="off" placeholder="请再次输入密码" class="layui-input" id="password2" style="width: 70%;">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button type="button" class="layui-btn" lay-submit="" lay-filter="demo1" id="queren" onclick="yzlogin()">确认修改</button>
                    <button type="button" class="layui-btn layui-btn-primary" id="chongzhi">重置</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- 模态框 -->
<div class="modal fade" id="myModal1" data-toggle="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- 模态框头部 -->
            <div class="modal-header">
                <h4 class="modal-title">温馨提示</h4>
            </div>
            <!-- 模态框主体 -->
            <div class="modal-body">
                用户未登录，请先登录！
            </div>
            <!-- 模态框底部 -->
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" id="closeMo1">关闭</button>
            </div>
        </div>
    </div>
</div>

</body>
<script src="/elective/student/js/jquery_2.2.4.min.js"></script>
<script src="/elective/student/js/popper.min.js"></script>
<script src="/elective/student/js/twitter-bootstrap.min.js"></script>
<script type="text/javascript">
    var a = sessionStorage.getItem("student");
    var b =  $.parseJSON( a );


    if(a == null){
        a = [];
        $("#myModal1").modal({backdrop:'static',keyboard:false});
        $("#myModal1").modal('show');
        $("#closeMo1").click(function(){
            window.location.href = "../html/studentLogin.html";
        });
    }


    $("#chongzhi").click(function(){
        $("#password").val("");
        $("#password2").val("");
    });

    function yzlogin(){
        if ($("#password").val()=="") {
            alert("密码不能为空");
        } else if($("#password2").val()==""){
            alert("密码不能为空");
        } else if($("#password").val()!=$("#password2").val()){
            alert("两次输入的密码不相同");
        } else{
            var c = b.id;
            $.ajax({
                type:"post",
                url:"http://localhost:8080/student/studentLogin/StuUpdatePassword",
                data:{
                    stuid:c,
                    password:$("#password").val()
                },
                success:function(data){
                    alert("更新密码成功,即将返回登录页面进行登录");
                    window.location.href = "http://localhost:8080/elective/html/studentLogin.html"

                },
                error:function(e){
                    alert("更新密码失败");
                }
            });
        }

    }
</script>
</html>
